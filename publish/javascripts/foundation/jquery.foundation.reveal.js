(function(c){var f=!1;c(document).on("click","a[data-reveal-id]",function(b){b.preventDefault();b=c(this).attr("data-reveal-id");c("#"+b).reveal(c(this).data())});c.fn.reveal=function(b){var g=c(document),b=c.extend({},{animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:c.noop,opened:c.noop,close:c.noop,closed:c.noop},b);return this.not(".reveal-modal.open").each(function(){var e,j;function m(){var a=c(".reveal-modal.open");a.length===1&&
(f=!0,a.trigger("reveal:close"))}var a=c(this),h=parseInt(a.css("top"),10),k=a.height()+h,i=!1,d=c(".reveal-modal-bg");e={top:0,opacity:0,visibility:"visible",display:"block"};j={top:h,opacity:1,visibility:"hidden",display:"none"};var l;d.length===0&&(d=c("<div />",{"class":"reveal-modal-bg"}).insertAfter(a),d.fadeTo("fast",0.8));a.bind("reveal:open.reveal",function(){if(!i){i=!0;m();a.addClass("open");if(b.animation==="fadeAndPop")e.top=g.scrollTop()-k,e.opacity=0,a.css(e),d.fadeIn(b.animationSpeed/
2),a.delay(b.animationSpeed/2).animate({top:g.scrollTop()+h+"px",opacity:1},b.animationSpeed,function(){a.trigger("reveal:opened")});if(b.animation==="fade")e.top=g.scrollTop()+h,e.opacity=0,a.css(e),d.fadeIn(b.animationSpeed/2),a.delay(b.animationSpeed/2).animate({opacity:1},b.animationSpeed,function(){a.trigger("reveal:opened")});if(b.animation==="none")e.top=g.scrollTop()+h,e.opacity=1,a.css(e),d.css({display:"block"}),a.trigger("reveal:opened")}});a.bind("reveal:open.reveal",function(){var b=
a.find(".flex-video"),c=b.find("iframe");c.length>0&&(c.attr("src",c.data("src")),b.fadeIn(100))});a.bind("reveal:close.reveal",function(){i||(i=!0,a.removeClass("open"),b.animation==="fadeAndPop"&&(a.animate({top:g.scrollTop()-k+"px",opacity:0},b.animationSpeed/2,function(){a.css(j)}),f?a.trigger("reveal:closed"):d.delay(b.animationSpeed).fadeOut(b.animationSpeed,function(){a.trigger("reveal:closed")})),b.animation==="fade"&&(a.animate({opacity:0},b.animationSpeed,function(){a.css(j)}),f?a.trigger("reveal:closed"):
d.delay(b.animationSpeed).fadeOut(b.animationSpeed,function(){a.trigger("reveal:closed")})),b.animation==="none"&&(a.css(j),f||d.css({display:"none"}),a.trigger("reveal:closed")),f=!1)});a.bind("reveal:closed.reveal",function(){var b=a.find(".flex-video"),c=b.find("iframe");c.length>0&&(c.data("src",c.attr("src")),c.attr("src",""),b.fadeOut(100))});a.bind("reveal:opened.reveal reveal:closed.reveal",function(){i=!1});a.bind("reveal:closed.reveal",function(){a.unbind(".reveal");d.unbind(".reveal");
l.unbind(".reveal");c("body").unbind(".reveal")});a.bind("reveal:open.reveal",b.open);a.bind("reveal:opened.reveal",b.opened);a.bind("reveal:close.reveal",b.close);a.bind("reveal:closed.reveal",b.closed);a.trigger("reveal:open");l=c("."+b.dismissModalClass).bind("click.reveal",function(){a.trigger("reveal:close")});b.closeOnBackgroundClick&&(d.css({cursor:"pointer"}),d.bind("click.reveal",function(){a.trigger("reveal:close")}));c("body").bind("keyup.reveal",function(b){b.which===27&&a.trigger("reveal:close")})})}})(jQuery);
