function setLocationEvents(d,b,c){var d=$(d),b=$(b),c=$(c),g=function(){var a=b.getSelected();if(a.value=="other")a=new Element("input",{size:"10"}),b.parentNode.replaceChild(a,b),b=a,b.hint("State"),a=new Element("input",{size:"10"}),c.parentNode.replaceChild(a,c),c=a,c.hint("City");else{var d=(new Element("img",{src:"images/loader.gif",align:"absmiddle"})).setStyle({marginLeft:"3px",display:"none"});b.insert({after:d});setTimeout(function(){d.setStyle({display:"inline"})},400);new Ajax.Jsonp("http://jotfor.ms/server.php",
{parameters:{action:"getCities",stateId:a.value},onComplete:function(b){d.remove();var a=b.responseText?b.responseText.evalJSON().cities:b.cities;console.log(b,a);b.success!==!1&&(a.length<=0?(a=new Element("input",{size:"10"}),c.parentNode.replaceChild(a,c),c=a):(c.tagName=="INPUT"&&(b=new Element("select"),c.parentNode.replaceChild(b,c),c=b,c.observe("change",f)),c.update($(new Option).insert("<option>Any</option>")),a.each(function(b,a){var d=new Option;d.value=++a;d.innerHTML=b;c.appendChild(d)}),
c.insert('<option value="other">Other</option>'),c.selectOption("Any")))}})}},f=function(){if(c.getSelected().value=="other"){var b=new Element("input",{size:"10"});c.parentNode.replaceChild(b,c);c=b;c.hint("City")}};d.observe("change",function(){var a=d.getSelected();if(a.value=="other")a=new Element("input",{size:"10"}),d.parentNode.replaceChild(a,d),d=a,d.hint("Country"),a=new Element("input",{size:"10"}),b.parentNode.replaceChild(a,b),b=a,b.hint("State"),a=new Element("input",{size:"10"}),c.parentNode.replaceChild(a,
c),c=a,c.hint("City");else{var e=(new Element("img",{src:"images/loader.gif",align:"absmiddle"})).setStyle({marginLeft:"3px",display:"none"});d.insert({after:e});setTimeout(function(){e.setStyle({display:"inline"})},400);new Ajax.Jsonp("http://jotfor.ms/server.php",{parameters:{action:"getStates",countryId:a.value},onComplete:function(a){e.remove();var d=a.responseText?a.responseText.evalJSON().states:a.states;console.log(d);a.success!==!1&&(d.length<=0?(d=new Element("input",{size:"10"}),b.parentNode.replaceChild(d,
b),b=d):(a="",b.tagName=="INPUT"&&(a=new Element("select"),b.parentNode.replaceChild(a,b),b=a,b.observe("change",g)),c.tagName=="INPUT"&&(a=new Element("select"),c.parentNode.replaceChild(a,c),c=a,c.observe("change",f)),b.update($(new Option).insert("<option>Any</option>")),c.update($(new Option).insert("<option>Any</option>")),d.each(function(a){var c=new Option;c.value=a.id;c.innerHTML=a.state;b.appendChild(c)}),b.insert("<option value='other'>Other</option>"),b.selectOption("Any")))}})}});b.observe("change",
g);c.observe("change",f)};
