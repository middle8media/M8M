(function(a,d){a.fn.foundationMagellan=function(f){var b=a("[data-magellan-expedition=fixed]"),g={threshold:b.length?b.outerHeight(!0):25,activeClass:"active"},f=a.extend({},g,f);a(document).on("magellan.arrival","[data-magellan-arrival]",function(){var e=a(this).closest("[data-magellan-expedition]").attr("data-magellan-active-class")||f.activeClass;a(this).closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(this).removeClass(e);a(this).addClass(e)});g=a("[data-magellan-expedition]");
g.find("[data-magellan-arrival]:first").addClass(g.attr("data-magellan-active-class")||f.activeClass);b.on("magellan.update-position",function(){var e=a(this);e.data("magellan-fixed-position","");e.data("magellan-top-offset","")});b.trigger("magellan.update-position");a(d).on("resize.magellan",function(){b.trigger("magellan.update-position")});a(d).on("scroll.magellan",function(){var e=a(d).scrollTop();b.each(function(){var c=a(this);c.data("magellan-top-offset")===""&&c.data("magellan-top-offset",
c.offset().top);var b=e+f.threshold>c.data("magellan-top-offset");c.data("magellan-fixed-position")!=b&&(c.data("magellan-fixed-position",b),b?c.css({position:"fixed",top:0}):c.css({position:"",top:""}))})});a(d).on("scroll.magellan",function(){var b=a(d).scrollTop();a("[data-magellan-destination]").each(function(){var c=a(this),d=c.attr("data-magellan-destination");c.offset().top-b<=f.threshold&&a("[data-magellan-arrival="+d+"]").trigger("magellan.arrival")})})}})(jQuery,this);
