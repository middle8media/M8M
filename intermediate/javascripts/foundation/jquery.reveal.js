(function(c){var f=!1;c("a[data-reveal-id]").live("click",function(b){b.preventDefault();b=c(this).attr("data-reveal-id");c("#"+b).reveal(c(this).data())});c.fn.reveal=function(b){b=c.extend({},{animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:c.noop,opened:c.noop,close:c.noop,closed:c.noop},b);return this.each(function(){var a=c(this),e=parseInt(a.css("top"),10),h=a.height()+e,g=!1,d=c(".reveal-modal-bg");d.length===0&&(d=c('<div class="reveal-modal-bg" />').insertAfter(a),
d.fadeTo("fast",0.8));a.bind("reveal:open.reveal",function(){g||(g=!0,c(".reveal-modal.open").length===1&&(f=!0,c(".reveal-modal.open").trigger("reveal:close")),a.addClass("open"),b.animation==="fadeAndPop"&&(a.css({top:c(document).scrollTop()-h,opacity:0,visibility:"visible",display:"block"}),d.fadeIn(b.animationSpeed/2),a.delay(b.animationSpeed/2).animate({top:c(document).scrollTop()+e+"px",opacity:1},b.animationSpeed,function(){a.trigger("reveal:opened")})),b.animation==="fade"&&(a.css({opacity:0,
visibility:"visible",display:"block",top:c(document).scrollTop()+e}),d.fadeIn(b.animationSpeed/2),a.delay(b.animationSpeed/2).animate({opacity:1},b.animationSpeed,function(){a.trigger("reveal:opened")})),b.animation==="none"&&(a.css({visibility:"visible",display:"block",top:c(document).scrollTop()+e}),d.css({display:"block"}),a.trigger("reveal:opened")))});a.bind("reveal:close.reveal",function(){g||(g=!0,a.removeClass("open"),b.animation==="fadeAndPop"&&(a.animate({top:c(document).scrollTop()-h+"px",
opacity:0},b.animationSpeed/2,function(){a.css({top:e,opacity:1,visibility:"hidden",display:"none"})}),f?a.trigger("reveal:closed"):d.delay(b.animationSpeed).fadeOut(b.animationSpeed,function(){a.trigger("reveal:closed")}),f=!1),b.animation==="fade"&&(a.animate({opacity:0},b.animationSpeed,function(){a.css({opacity:1,visibility:"hidden",display:"none",top:e})}),f?a.trigger("reveal:closed"):d.delay(b.animationSpeed).fadeOut(b.animationSpeed,function(){a.trigger("reveal:closed")})),b.animation==="none"&&
(a.css({visibility:"hidden",display:"block",top:e}),f||d.css({display:"none"}),a.trigger("reveal:closed")))});a.bind("reveal:opened.reveal reveal:closed.reveal",function(){g=!1});a.bind("reveal:closed.reveal",function(){a.unbind(".reveal");d.unbind(".reveal");c("."+b.dismissModalClass).unbind(".reveal");c("body").unbind(".reveal")});a.bind("reveal:open.reveal",b.open);a.bind("reveal:opened.reveal",b.opened);a.bind("reveal:close.reveal",b.close);a.bind("reveal:closed.reveal",b.closed);a.trigger("reveal:open");
c("."+b.dismissModalClass).bind("click.reveal",function(){a.trigger("reveal:close")});b.closeOnBackgroundClick&&(d.css({cursor:"pointer"}),d.bind("click.reveal",function(){a.trigger("reveal:close")}));c("body").bind("keyup.reveal",function(b){b.which===27&&a.trigger("reveal:close")})})}})(jQuery);
