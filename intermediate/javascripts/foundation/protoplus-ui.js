if(window.Protoplus===void 0)throw"Error: ProtoPlus is required by ProtoPlus-UI.js";
Object.extend(document,{getViewPortDimensions:function(){var a,b;typeof window.innerWidth!="undefined"?(b=window.innerWidth,a=window.innerHeight):typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0?(b=document.documentElement.clientWidth,a=document.documentElement.clientHeight):(b=document.getElementsByTagName("body")[0].clientWidth,a=document.getElementsByTagName("body")[0].clientHeight);return{height:a,
width:b}},stopTooltips:function(){document.stopTooltip=!0;$$(".pp_tooltip_").each(function(a){a.remove()});return!0},startTooltips:function(){document.stopTooltip=!1},windowDefaults:{height:!1,width:400,title:"&nbsp;",titleBackground:"#F5F5F5",buttonsBackground:"#F5F5F5",background:"#FFFFFF",top:"25%",left:"25%",winZindex:10001,borderWidth:10,borderColor:"#000",titleTextColor:"#777",resizable:!1,borderOpacity:0.3,borderRadius:"5px",titleClass:!1,contentClass:!1,buttonsClass:!1,closeButton:"X",openEffect:!0,
closeEffect:!0,dim:!0,modal:!0,dimColor:"#fff",dimOpacity:0.8,dimZindex:1E4,dynamic:!0,contentPadding:"8",closeTo:!1,buttons:!1,buttonsAlign:"right",hideTitle:!1},window:function(a){a=Object.extend(Object.deepClone(document.windowDefaults),a||{});a=Object.extend({onClose:Prototype.K,onInsert:Prototype.K,onDisplay:Prototype.K},a,{});a.dim=a.modal!==!0?!1:a.dim;a.width=a.width?parseInt(a.width,10):"";a.height=a.height?parseInt(a.height,10):!1;a.borderWidth=parseInt(a.borderWidth,10);var b={background:a.titleBackground,
zIndex:1E3,position:"relative",padding:"2px",borderBottom:"1px solid #C27A00",height:"35px",MozBorderRadius:"3px 3px 0px 0px",WebkitBorderRadius:"3px 3px 0px 0px",borderRadius:"3px 3px 0px 0px"},f={background:a.dimColor,height:"100%",width:"100%",position:"fixed",top:"0px",left:"0px",opacity:a.dimOpacity,zIndex:a.dimZindex},k={top:a.top,left:a.left,position:"absolute",padding:a.borderWidth+"px",height:"auto",width:a.width?a.width=="auto"?"auto":a.width+"px":"",zIndex:a.winZindex},g={padding:"0px",
display:"inline-block",width:"100%",borderTop:"1px solid #ffffff",background:a.buttonsBackground,zIndex:999,position:"relative",textAlign:a.buttonsAlign,MozBorderRadius:"0 0 3px 3px",WebkitBorderRadius:"0px 0px 3px 3px",borderRadius:"0px 0px 3px 3px"},i={zIndex:1E3,height:a.height!==!1?a.height+"px":"auto",position:"relative",display:"inline-block",width:"100%"},h={fontWeight:"bold",color:a.titleTextColor,textShadow:"0 1px 1px rgba(0, 0, 0, 0.5)",paddingLeft:"10px",fontSize:"13px"},c={height:"100%",
width:"100%",background:a.borderColor,position:"absolute",top:"0px",left:"0px",zIndex:-1,opacity:a.borderOpacity},m={padding:a.contentPadding+"px",background:a.background},j;if(a.dim)j=new Element("div",{className:"protoplus-dim"}),j.onmousedown=function(){return!1},j.setStyle(f);var l,n,r,o,q,s,p={};l=new Element("div");l.insert(f=new Element("div"));l.insert(r=new Element("div"));r.insert(o=new Element("div"));o.insert((new Element("table",{width:"100%",height:"100%"})).insert((new Element("tbody")).insert(n=
new Element("tr"))));n.insert(q=(new Element("td",{valign:"middle"})).setStyle("vertical-align: middle;"));n.insert(n=(new Element("td",{width:20,align:"center"})).setStyle("vertical-align: middle;"));r.insert(m=(new Element("div",{className:"window-content-wrapper"})).insert(s=new Element("div")).setStyle(m));l.setTitle=function(a){q.update(a);return l};l.blockWindow=function(){r.insert(p=(new Element("div")).setStyle("position:absolute; top:0px; left:0px; height:100%; width:100%; opacity:0.5; background:#000; z-index:10000"));
p.onclick=p.onmousedown=p.onmousemove=function(){return!1};return p};l.unblockWindow=function(){p.remove();return l};a.hideTitle&&(o.hide(),n=(new Element("div")).setStyle("text-align:center;"),r.insert(n.setStyle("position:absolute;z-index:1111000; right:5px; top:5px;")),m.setStyle({MozBorderRadius:b.MozBorderRadius,WebkitBorderRadius:b.WebkitBorderRadius,borderRadius:b.borderRadius}));l.buttons={};var u;a.buttons&&a.buttons.length>0?(r.insert(m=new Element("div",{className:"window-buttons-wrapper"})),
a.buttonsClass?m.addClassName(a.buttonsClass):m.setStyle(g),m.insert(u=(new Element("div")).setStyle("padding:12px;height:23px;")),$A(a.buttons).each(function(a,b){var c=(new Element("button",{className:"big-button buttons buttons-"+(a.color||"grey"),type:"button",name:a.name||"button-"+b,id:a.id||"button-"+b})).observe("click",function(){a.handler(l,c)});a.className&&c.addClassName(a.className);var h=(new Element("span")).insert(a.title);if(a.icon){a.iconAlign=a.iconAlign||"left";var i=(new Element("img",
{src:a.icon,align:a.iconAlign=="right"?"absmiddle":"left"})).addClassName("icon-"+a.iconAlign);a.iconAlign=="left"&&c.insert(i);c.insert(h);a.iconAlign=="right"&&c.insert(i)}else c.insert(h);a.align=="left"&&c.setStyle("float:left");c.changeTitle=function(a){h.update(a);return c};c.updateImage=function(b){i.src=b.icon;b.iconAlign=b.iconAlign||a.iconAlign;b.iconAlign=="right"?(i.removeClassName("icon-left"),i.addClassName("icon-right")):(i.removeClassName("icon-right"),i.addClassName("icon-left"))};
l.buttons[a.name]=c;a.hidden===!0&&c.hide();a.disabled===!0&&c.disable();a.style&&c.setStyle(a.style);u.insert(c)})):m.setStyle({MozBorderRadius:g.MozBorderRadius,WebkitBorderRadius:g.WebkitBorderRadius,borderRadius:g.borderRadius});l.setStyle(k);f.setStyle(c).setCSSBorderRadius(a.borderRadius);a.titleClass?o.addClassName(a.titleClass):o.setStyle(b);a.contentClass?s.addClassName(a.contentClass):s.setStyle(i).addClassName("window-content");r.setStyle({zIndex:600,MozBorderRadius:"3px",WebkitBorderRadius:"3px",
borderRadius:"3px"});q.setStyle(h);n.setStyle({fontFamily:"Arial, Helvetica, sans-serif",color:"#aaa",cursor:"default"});var t=function(b){document._onedit=!1;if(a.onClose(l,b)!==!1)b=function(){if(j)j.remove(),document.dimmed=!1;l.remove();$(document.body).setStyle({overflow:""})},a.closeEffect===!0?l.shift({opacity:0,duration:0.3,onEnd:b}):b(),Event.stopObserving(window,"resize",l.reCenter),document.openWindows=$A(document.openWindows).collect(function(a){if(a!==l)return a}).compact()};if(a.dim)$(document.body).insert(j),
document.dimmed=!0;q.insert(a.title);n.insert(a.closeButton);n.onclick=function(){t("CROSS")};s.insert(a.content);$(document.body).insert(l);a.openEffect===!0&&(l.setStyle({opacity:0}),l.shift({opacity:1,duration:0.5}));try{document._onedit=!0,a.onInsert(l)}catch(y){console.error(y)}b=document.viewport.getDimensions();k=$(document.body).cumulativeScrollOffset();g=l.getDimensions();l.setStyle({top:(b.height-g.height)/2+k.top+"px",left:(b.width-g.width)/2+k.left+"px"});j&&j.setStyle({height:b.height+
"px",width:b.width+"px"});l.reCenter=function(){var a=document.viewport.getDimensions(),b=$(document.body).cumulativeScrollOffset(),c=l.getDimensions();l.setStyle({top:(a.height-c.height)/2+b.top+"px",left:(a.width-c.width)/2+b.left+"px"});j&&j.setStyle({height:a.height+"px",width:a.width+"px"})};a.onDisplay(l);Event.observe(window,"resize",l.reCenter);a.resizable&&r.resizable({constrainViewport:!0,element:s,sensitivity:20,onResize:function(b,c,h){h!="vertical"&&l.setStyle({width:c+a.borderWidth*
2-10+"px"});s.isOverflow()?s.setStyle({overflow:"auto"}):s.setStyle({overflow:""})}});l.setDraggable({handler:q,constrainViewport:!0,dynamic:a.dynamic,dragEffect:!1});l.close=t;document.openWindows.push(l);return l}});document.observe("keyup",function(a){a=document.getEvent(a);Event.isInput(a)||document.openWindows.length>0&&a.keyCode==27&&document.openWindows.pop().close("ESC")});document.openWindows=[];document.createNewWindow=document.window;
Protoplus.ui={isVisible:function(a){a=$(a);return!a.parentNode?!1:a&&a.tagName=="BODY"?!0:a.style.display=="none"||a.style.visibility=="hidden"?!1:Protoplus.ui.isVisible(a.parentNode)},editable:function(a,b){a=$(a);b=Object.extend({defaultText:" ",onStart:Prototype.K,onEnd:Prototype.K,processAfter:Prototype.K,processBefore:Prototype.K,onBeforeStart:Prototype.K,escapeHTML:!1,doubleClick:!1,onKeyUp:Prototype.K,className:!1,options:[{text:"Please Select",value:"0"}],style:{background:"none",border:"none",
color:"#333",fontStyle:"italic",width:"99%"},type:"text"},b||{});a.onStart=b.onStart;a.onEnd=b.onEnd;a.defaultText=b.defaultText;a.processAfter=b.processAfter;a.cleanWhitespace();try{a.innerHTML=a.innerHTML||a.defaultText}catch(f){}var k=[a];b.labelEl&&k.push($(b.labelEl));$A(k).invoke("observe",b.doubleClick?"dblclick":"click",function(){if(b.onBeforeStart(a)!==!1&&!a.onedit){a.onedit=!0;if(document.stopEditables)return!0;document._onedit=!0;document.stopTooltips();var i=a.innerHTML.replace(/^\s+|\s+$/gim,
""),h=b.type,c=$A(b.options),f=function(b){a.keyEventFired?a.keyEventFired=!1:j.colorPickerEnabled||(j.stopObserving("blur",f),a.stopObserving("keypress",l),g(b,i))},j="",l=function(b){if(h=="textarea")return!0;if(b.shiftKey)return!0;if(!j.colorPickerEnabled&&(b=document.getEvent(b),b.keyCode==13||b.keyCode==3))a.keyEventFired=!0,a.stopObserving("keypress",l),j.stopObserving("blur",f),g(b,i)};h.toLowerCase()=="textarea"&&(i=i.replace(/<br>/gi,"&lt;br&gt;"));i=i.unescapeHTML();i=i==b.defaultText?"":
i;i=b.processBefore(i,a);if(h.toLowerCase()=="textarea"){j=new Element("textarea");j.value=i;j.observe("blur",f);j.observe("keyup",b.onKeyUp);try{j.select()}catch(k){}}else["select","dropdown","combo","combobox"].include(h.toLowerCase())?(j=(new Element("select")).observe("change",function(b){a.keyEventFired=!0;g(b,i)}),typeof c[0]=="string"?c.each(function(a){j.insert((new Element("option")).insert(a))}):c.each(function(a,b){j.insert((new Element("option",{value:a.value?a.value:b})).insert(a.text))}),
j.selectOption(i),j.observe("blur",f)):["radio","checkbox"].include(h.toLowerCase())?(j=new Element("div"),typeof c[0]=="string"?c.each(function(a,b){j.insert(new Element("input",{type:h,name:"pp",id:"pl_"+b})).insert((new Element("label",{htmlFor:"pl_"+b,id:"lb_"+b})).insert(a)).insert("<br>")}):c.each(function(a,b){j.insert(new Element("input",{type:h,name:"pp",value:a.value?a.value:b,id:"pl_"+b})).insert((new Element("label",{htmlFor:"pl_"+b,id:"lb_"+b})).insert(a.text)).insert("<br>")})):(j=new Element("input",
{type:h,value:i}),j.observe("blur",f),j.observe("keyup",b.onKeyUp),j.select());b.className!==!1?j.addClassName(b.className):j.setStyle(b.style);a.update(j);a.finishEdit=function(){f({target:j})};document._stopEdit=function(){a.keyEventFired=!0;g({target:j},i)};a.onStart(a,i,j);setTimeout(function(){j.select()},100);a.observe("keypress",l)}});var g=function(a,b){document._stopEdit=!1;var c=$(a.target),f="";if(!c.parentNode)return!0;var j=$(c.parentNode);j.onedit=!1;"select"==c.nodeName.toLowerCase()?
f=c.options[c.selectedIndex].text:["checkbox","radio"].include(c.type&&c.type.toLowerCase())?(j=$(c.parentNode.parentNode),f="",$(c.parentNode).descendants().findAll(function(a){return a.checked===!0}).each(function(a){$(a.id.replace("pl_","lb_"))&&(f+=$(a.id.replace("pl_","lb_")).innerHTML+"<br>")})):f=c.value;f===""&&j.defaultText?j.update(j.defaultText):j.update(j.processAfter(f,j,c.getSelected()||f,b));document._onedit=!1;document.startTooltips();j.onEnd(j,j.innerHTML,b,c.getSelected()||f)};return a},
setShadowColor:function(a,b){a=$(a);$A(a.descendants()).each(function(a){a.nodeType==Node.ELEMENT_NODE&&a.setStyle({color:b})});return a},cleanShadow:function(a){a=$(a);a.descendants().each(function(a){a.className=="pp_shadow"&&a.remove()});return a},getParentContext:function(a){a=$(a);try{return!a.parentNode?!1:a._contextMenuEnabled?a:a.tagName=="BODY"?!1:$(a.parentNode).getParentContext()}catch(b){alert(b)}},hasContextMenu:function(a){return!!a._contextMenuEnabled},setContextMenu:function(a,b){a=
$(a);b=Object.extend({others:[]},b||{});a._contextMenuEnabled=!0;a.items={};$A(b.menuItems).each(function(b,h){b=="-"?a.items["seperator_"+h]=b:b.name?a.items[b.name]=b:a.items["item_"+h]=b});a.changeButtonText=function(b,h){a.items[b].title=h;return $(a.items[b].elem).select(".context-menu-item-text")[0].update(h)};a.getButton=function(b){return a.items[b].elem};a.showButton=function(b){a.items[b].hidden=!1};a.hideButton=function(b){a.items[b].hidden=!0};a.enableButton=function(b){a.items[b].disabled=
!1};a.disableButton=function(b){a.items[b].disabled=!0};a.options=b;b.others.push(a);var f=function(b,h){var c=(new Element("li")).observe("contextmenu",Event.stop);if(Object.isString(h)&&h=="-")c.insert("<hr>"),c.addClassName("context-menu-separator");else{if(h.icon){var f=(new Element("img",{src:h.icon,className:h.iconClassName||"",align:"left"})).setStyle("margin:0 4px 0 0;");c.insert(f)}else c.setStyle("padding-left:24px");h.handler=h.handler||Prototype.K;h.disabled?c.addClassName("context-menu-item-disabled"):
(c.addClassName("context-menu-item"),c.observe("click",function(b){Event.stop(b);h.handler.bind(a)();$$(".context-menu-all").invoke("remove")}));h.items&&(c.insert('<img align="right" src="images/right-handle.png" style="margin-top:2px;" />'),k(c,h));h.hidden&&c.hide();c.insert((new Element("span",{className:"context-menu-item-text"})).update(h.title.shorten(26)))}b.insert(c);return c},k=function(a,b){var c=(new Element("div",{className:"context-menu-all"})).setStyle("z-index:1000000"),m=(new Element("div",
{className:"context-menu-back"})).setOpacity(0.98),j=new Element("div",{className:"context-menu"});c.insert(m).insert(j);m=(new Element("div",{className:"context-menu-title"})).observe("contextmenu",Event.stop);m.insert(b.title.shorten(26));j.insert(m);m=b.items;Object.isFunction(b.items)&&(m=b.items());$A(m).each(function(a){f(j,a)});a.insert(c.hide());c.setStyle({position:"absolute",top:"0px"});var g=!1;a.mouseEnter(function(){if(!b.disabled&&!g){clearTimeout(void 0);c.show();g=!0;var a=document.viewport.getWidth(),
f=c.getLayout(),i=c.up(".context-menu-all"),a=f.get("width")+f.get("cumulative-left")>a-200;pos=!a&&i&&i.__pos?i.__pos:a?"left":"right";c.__pos=pos;c.style[pos]="-"+(c.getWidth()-5)+"px"}},function(){clearTimeout(void 0);c.style.left=c.style.right="";c.hide();g=!1})},g=function(a,b,c){c=c||{};Event.stop(a);if(b||Prototype.Browser.Opera&&a.ctrlKey||Event.isRightClick(a)||Prototype.Browser.IE){$$(".context-menu-all").invoke("remove");var g=a.target,g=g.getParentContext();if(g!==!1){if(g.options.onStart)g.options.onStart();
var b=(new Element("div",{className:"context-menu-all"})).setStyle("z-index:1000000"),j=(new Element("div",{className:"context-menu-back"})).setOpacity(0.98),k=new Element("div",{className:"context-menu"});b.insert(j).insert(k);g.options.title&&(j=(new Element("div",{className:"context-menu-title"})).observe("contextmenu",Event.stop),j.insert(g.options.title),k.insert(j));$H(g.items).each(function(a){var b=f(k,a.value);g.items[a.key].elem=b});$(document.body).insert(b.hide());var j=Event.pointer(a).x,
n=Event.pointer(a).y,a=document.viewport.getDimensions(),r=k.getDimensions(),o=document.viewport.getScrollOffsets(),n=n-o.top+r.height>a.height&&n-o.top>r.height?n-r.height-20:n,j=j+r.width>a.width?a.width-r.width-20:j;b.setStyle({position:"absolute",top:(c.top?c.top:n)+"px",left:(c.left?c.left:j)+"px"});if(g.options.onOpen)g.options.onOpen(k);b.show()}}};a.openMenu=g;$A(b.others).invoke("observe",Prototype.Browser.Opera?"click":"contextmenu",function(a){a.stop();var b={};if(Prototype.Browser.IE)for(var c in a)b[c]=
a[c];else b=a;setTimeout(function(){g(b)},0)});if(!document.contextMenuHandlerSet)document.contextMenuHandlerSet=!0,$(document).observe("click",function(){$$(".context-menu-all").invoke("remove")});return a},textshadow:function(a,b){var a=$(a),b=Object.extend({light:"upleft",color:"#666",offset:1,opacity:1,padding:0,glowOpacity:0.1,align:void 0,imageLike:!1},b||{}),f=b.light,k=b.color,g=b.offset,i=b.opacity,h=b.align?b.align:$(elem).getStyle("textAlign"),c=b.padding?b.padding+"px":$(elem).getStyle("padding"),
m=elem.innerHTML,j=new Element("div"),l=new Element("div"),i={color:k,height:a.getStyle("height"),width:a.getStyle("width"),"text-align":h,padding:c,position:"absolute","z-index":100,opacity:i};elem.innerValue=m;elem.update("");j.setStyle({position:"relative"});l.update(m);j.appendChild(l);for(h=0;h<g;h++){c=new Element("div",{className:"pp_shadow"});c.update(m);c.setUnselectable();d=g-h;c.setStyle(i);switch(f){case "down":c.setStyle({top:"-"+d+"px"});break;case "up":c.setStyle({top:d+"px"});break;
case "left":c.setStyle({top:"0px",left:d+"px"});break;case "right":c.setStyle({top:"0px",left:"-"+d+"px"});break;case "upright":c.setStyle({top:d+"px",left:"-"+d+"px"});break;case "downleft":c.setStyle({top:"-"+d+"px",left:d+"px"});break;case "downright":c.setStyle({top:"-"+d+"px",left:"-"+d+"px"});break;case "wide":c.setStyle({top:"0px",left:"0px"});j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:"0px",left:"-"+d+"px"})).update(m).setShadowColor(k).setUnselectable());j.appendChild((new Element("div")).setStyle(Object.extend(i,
{top:"0px",left:d+"px"})).update(m).setShadowColor(k).setUnselectable());break;case "glow":c.setStyle({top:"0px",left:"0px"});j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:d+"px",opacity:b.glowOpacity})).update(m).setShadowColor(k).setUnselectable());j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:"-"+d+"px",opacity:b.glowOpacity})).update(m).setShadowColor(k).setUnselectable());j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:d+"px",left:"-"+d+
"px",opacity:b.glowOpacity})).update(m).setShadowColor(k).setUnselectable());j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:d+"px",left:d+"px",opacity:b.glowOpacity})).update(m).setShadowColor(k).setUnselectable());j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:"-"+d+"px",left:"-"+d+"px",opacity:b.glowOpacity})).update(m).setShadowColor(k).setUnselectable());j.appendChild((new Element("div")).setStyle(Object.extend(i,{top:"-"+d+"px",left:d+"px",opacity:b.glowOpacity})).update(m).setShadowColor(k).setUnselectable());
break;default:c.setStyle({top:d+"px",left:d+"px"})}c.setShadowColor(k).setUnselectable();j.appendChild(c)}l.setStyle({position:"relative",zIndex:"120"});elem.appendChild(j);b.imageLike&&elem.setUnselectable().setStyle({cursor:"default"});return a},tooltip:function(a,b,f){a=$(a);if("Prototip"in window)return f=Object.extend({delay:0.01},f||{}),new Tip(a,b,f),a;if(typeof b!="string")return a;f=Object.extend({className:!1,fixed:!1,opacity:1,title:!1,width:200,height:100,offset:!1,zIndex:1E5,delay:!1,
duration:!1,fadeIn:!1,fadeOut:!1,shadow:!1},f||{});b=f.title?"<b>"+f.title+"</b><br>"+b:b;a.hover(function(k,g){var i=document.viewport.getDimensions(),h=function(a){var b=f.offset.top?f.offset.top:15,c=f.offset.left?f.offset.left:15,h=Event.pointerY(a)+b,a=Event.pointerX(a)+c,g=tooldiv.getDimensions();a+g.width>i.width-20&&(a-=g.width+20+c);h+g.height>i.height-20&&(h-=g.height+b);return{top:h,left:a}};if(document.stopTooltip)return $$(".pp_tooltip_").each(function(a){a.remove()}),!0;outer=(new Element("div",
{className:"pp_tooltip_"})).setStyle({opacity:f.opacity,position:"absolute",zIndex:f.zIndex});f.className?tooldiv=(new Element("div",{className:f.className})).setStyle({position:"relative",top:"0px",left:"0px",zIndex:10}).update(b):(tooldiv=(new Element("div")).setStyle({padding:"4px",background:"#eee",width:f.width=="auto"?"auto":f.width+"px",border:"1px solid #333",position:"absolute",top:"0px",left:"0px",zIndex:10}).update(b),tooldiv.setCSSBorderRadius("5px"));f.shadow&&(shadTop=f.shadow.top?parseInt(f.shadow.top,
10):4,shadLeft=f.shadow.left?parseInt(f.shadow.left,10):4,shadBack=f.shadow.back?f.shadow.back:"#000",shadOp=f.shadow.opacity?f.shadow.opacity:0.2,f.className?shadow=(new Element("div",{className:f.className||""})).setStyle({position:"absolute",borderColor:"#000",color:"#000",top:shadTop+"px",left:shadLeft+"px",zIndex:9,background:shadBack,opacity:shadOp}):(shadow=(new Element("div",{className:f.className||""})).setStyle({padding:"4px",border:"1px solid black",color:"#000",width:f.width+"px",position:"absolute",
top:shadTop+"px",left:shadLeft+"px",zIndex:9,background:shadBack,opacity:shadOp}),shadow.setCSSBorderRadius("5px")),shadow.update(b),outer.appendChild(shadow));outer.appendChild(tooldiv);var c=function(){if(f.fixed){var b=f.fixed.top?parseInt(f.fixed.top,10):a.getHeight(),c=f.fixed.left?parseInt(f.fixed.left,10):a.getWidth()-50;outer.setStyle({top:b+"px",left:c+"px"})}else a.observe("mousemove",function(a){if(document.stopTooltip)return $$(".pp_tooltip_").each(function(a){a.remove()}),!0;a=h(a);outer.setStyle({top:a.top+
"px",left:a.left+"px"})})};outer.delay=setTimeout(function(){if(f.fadeIn){document.body.appendChild(outer);var a=h(g);outer.setStyle({opacity:0,top:a.top+"px",left:a.left+"px"});dur=f.fadeIn.duration?f.fadeIn.duration:1;outer.appear({duration:dur,onEnd:c()})}else document.body.appendChild(outer),a=h(g),outer.setStyle({top:a.top+"px",left:a.left+"px"}),setTimeout(c,100);if(f.duration)outer.duration=setTimeout(function(){f.fadeOut?(dur=f.fadeOut.duration?f.fadeOut.duration:1,outer.fade({duration:dur,
onEnd:function(){outer.parentNode&&outer.remove()}})):outer.parentNode&&outer.remove()},f.duration*1E3||0)},f.delay*1E3||0)},function(){if(document.stopTooltip)return $$(".pp_tooltip_").each(function(a){a.remove()}),!0;outer&&(clearTimeout(outer.delay),clearTimeout(outer.duration));f.fadeOut?(dur=f.fadeOut.duration?f.fadeOut.duration:0.2,outer.fade({duration:dur,onEnd:function(){outer.parentNode&&outer.remove()}})):outer.parentNode&&outer.remove()});return a},softScroll:function(a,b){var b=Object.extend({scrollSpeed:50},
b||{}),f=new Element("div",{className:"scroll-bar"}),k=new Element("div",{className:"scroll-style"}),k=(new Element("table",{cellpadding:0,cellspacing:0,height:"100%"})).insert((new Element("tbody")).insert((new Element("tr")).insert((new Element("td",{valign:"top"})).setStyle("height:100%;padding:5px;").insert(k))));f.insert(k);a.setStyle("overflow:hidden;");f.setStyle("position:absolute; top:0px; right:1px; width:16px; opacity:0; height:50%;");var g=a.wrap("div");a.updateScrollSize=function(){var b;
try{b=g.measure("margin-box-height")}catch(h){b=g.getHeight()+(parseInt(g.getStyle("padding-top"),10)||0)+(parseInt(g.getStyle("padding-bottom"),10)||0)+(parseInt(g.getStyle("margin-top"),10)||0)+(parseInt(g.getStyle("margin-bottom"),10)||0)}var c=a.scrollHeight;if(!(c<=0))b=b*100/c,b>100?f.hide():f.show(),f.style.height=b+"%"};a.updateScrollSize();f.setDraggable({constraint:"vertical",dragClass:"scroll-onpress",onDrag:function(b){var h=parseInt(b.style.top,10);if(h<0)return b.style.top="0px",!1;
var c=g.getHeight(),k=f.getHeight();if(h+k>c)return b.style.top=c-k+"px",!1;b=g.getHeight();a.scrollTop=Math.round(a.scrollHeight*(h*100/b)/100)}});g.hover(function(){a.updateScrollSize();f.shift({opacity:1,duration:0.5})},function(){f.__dragging!==!0&&f.shift({opacity:0,duration:0.5})});g.setStyle("position:relative; display:inline-block;");g.insert(f);a.observe(Event.mousewheel,function(i){i.stop();i=Event.wheel(i);i>0?a.scrollTop-=b.scrollSpeed:i<0&&(a.scrollTop+=b.scrollSpeed);var i=a.scrollTop,
h=a.scrollHeight,c=g.getHeight();f.style.top=Math.round(c*(i*100/h)/100)+"px"})},setDraggable:function(a,b){b=Object.extend({dragClass:"",handler:!1,dragFromOriginal:!1,onStart:Prototype.K,changeClone:Prototype.K,onDrag:Prototype.K,onDragEnd:Prototype.K,onEnd:Prototype.K,dragEffect:!1,revert:!1,clone:!1,snap:!1,cursor:"move",offset:!1,constraint:!1,constrainLeft:!1,constrainRight:!1,constrainTop:!1,constrainBottom:!1,constrainOffset:!1,constrainViewport:!1,constrainParent:!1,dynamic:!0},b||{});if(b.snap&&
(typeof b.snap=="number"||typeof b.snap=="string"))b.snap=[b.snap,b.snap];if(b.constrainOffset&&b.constrainOffset.length==4)b.constrainTop=b.constrainTop?b.constrainTop:b.constrainOffset[0],b.constrainRight=b.constrainRight?b.constrainRight:b.constrainOffset[1],b.constrainBottom=b.constrainBottom?b.constrainBottom:b.constrainOffset[2],b.constrainLeft=b.constrainLeft?b.constrainLeft:b.constrainOffset[3];var f,k=!1,g=function(a){Event.stop(a);if(b.onDrag(drag_element,f,a)!==!1){var c=startY+Number(Event.pointerY(a)-
mouseY),g=startX+Number(Event.pointerX(a)-mouseX);b.offset&&(c=b.offset[1]+Event.pointerY(a),g=b.offset[0]+Event.pointerX(a));b.snap&&(c=(c/b.snap[1]).round()*b.snap[1],g=(g/b.snap[0]).round()*b.snap[0]);c=b.constrainBottom!==!1&&c>=b.constrainBottom?b.constrainBottom:c;c=b.constrainTop!==!1&&c<=b.constrainTop?b.constrainTop:c;g=b.constrainRight!==!1&&g>=b.constrainRight?b.constrainRight:g;g=b.constrainLeft!==!1&&g<=b.constrainLeft?b.constrainLeft:g;b.constraint=="vertical"?drag_element.setStyle({top:c+
"px"}):b.constraint=="horizontal"?drag_element.setStyle({left:g+"px"}):drag_element.setStyle({top:c+"px",left:g+"px"});k&&clearTimeout(k);b.onDrag(drag_element,f,a);k=setTimeout(function(){b.onDragEnd(drag_element,f,a)},50)}},i=function(h){Event.stop(h);if(b.dynamic!==!0)document.temp.setStyle({top:a.getStyle("top"),left:a.getStyle("left")}),a.parentNode.replaceChild(document.temp,a),document.temp.oldZIndex=a.oldZIndex,a=document.temp;if(b.onEnd(drag_element,f,h)!==!1)if(a.oldZIndex?drag_element.setStyle({zIndex:a.oldZIndex}):
drag_element.setStyle({zIndex:""}),b.revert){if(b.revert===!0)b.revert={easing:"sineIn",duration:0.5};b.revert=Object.extend({left:drag_element.startX,top:drag_element.startY,opacity:1,duration:0.5,easing:"sineIn"},b.revert||{});drag_element.shift(b.revert);drag_element.startX=!1;drag_element.startY=!1}else b.dragEffect&&drag_element.shift({opacity:1,duration:0.2});a.__dragging=!1;drag_element.removeClassName(b.dragClass);f.setSelectable();drag_element.setSelectable();$(document.body).setSelectable();
document.stopObserving("mousemove",g);document.stopObserving("mouseup",i)};f=b.handler?typeof b.handler=="string"?b.handler.startsWith(".")?a.descendants().find(function(a){return a.className==b.handler.replace(/^\./,"")}):$(b.handler):$(b.handler):a;f.setStyle({cursor:b.cursor});f.observe("mousedown",function(h){Event.stop(h);a.__dragging=!0;if(document.stopDrag)return!0;if(b.dragFromOriginal&&h.target!=f)return!1;var c=!1,k=!1;b.constrainElement&&(k=Prototype.Browser.IE?{top:0,left:0}:$(b.constrainElement).cumulativeOffset(),
c=$(b.constrainElement).getDimensions());b.constrainParent&&(k=$(a.parentNode).getStyle("position")=="relative"||$(a.parentNode).getStyle("position")=="absolute"?{top:0,left:0}:Prototype.Browser.IE?{top:0,left:0}:$(a.parentNode).cumulativeOffset(),c=$(a.parentNode).getDimensions());b.constrainViewport&&(k=$(document.body).cumulativeScrollOffset(),c=document.viewport.getDimensions());if(c)c.height+=k.top,c.width+=k.left,b.constrainTop=k.top+1,b.constrainBottom=c.height-(a.getHeight()+3),b.constrainRight=
c.width-(a.getWidth()+3),b.constrainLeft=k.left+1;var j;if(b.dynamic!==!0){try{document.temp=a,j=(new Element("div")).setStyle({height:a.getHeight()+"px",width:a.getWidth()+"px",border:"1px dashed black",top:a.getStyle("top")||0,left:a.getStyle("left")||0,zIndex:a.getStyle("zIndex")||0,position:a.getStyle("position"),background:"#f5f5f5",opacity:0.3})}catch(l){}a.parentNode.replaceChild(j,a);a=j}["relative","absolute"].include($(a.parentNode).getStyle("position"))?(startX=a.getStyle("left")?parseInt(a.getStyle("left"),
10):a.offsetLeft,startY=a.getStyle("top")?parseInt(a.getStyle("top"),10):a.offsetTop):(c=a.cumulativeOffset(),startX=c.left,startY=c.top);mouseX=Number(Event.pointerX(h));mouseY=Number(Event.pointerY(h));b.clone?(drag_element=b.changeClone(a.cloneNode({deep:!0}),startX,startY),$(document.body).insert(drag_element)):drag_element=a;b.onStart(drag_element,f,h);drag_element.addClassName(b.dragClass);a.oldZIndex=a.getStyle("z-index")||0;b.dragEffect&&drag_element.shift({opacity:0.7,duration:0.2});drag_element.setStyle({position:"absolute",
zIndex:99998});if(b.revert&&!drag_element.startX&&!drag_element.startY)drag_element.startX=startX,drag_element.startY=startY;drag_element.setUnselectable();f.setUnselectable();$(document.body).setUnselectable();document.observe("mousemove",g);document.observe("mouseup",i)});return a},rating:function(a,b){a=$(a);b=Object.extend({imagePath:"stars.png",onRate:Prototype.K,resetButtonImage:!1,resetButtonTitle:"Cancel Your Rating",resetButton:!0,inputClassName:"",titles:[],disable:!1,disabled:a.getAttribute("disabled")?
a.getAttribute("disabled"):!1,stars:a.getAttribute("stars")?a.getAttribute("stars"):5,name:a.getAttribute("name")?a.getAttribute("name"):"rating",value:a.getAttribute("value")?a.getAttribute("value"):0,cleanFirst:!1},b||{});if(a.converted)return a;a.converted=!0;a.addClassName("form-star-rating");var f=new Element("input",{type:"hidden",name:b.name,className:b.inputClassName}),k=$A([]);a.disabled=b.disabled=="true"||b.disabled===!0?!0:!1;a.setStyle({display:"inline-block",width:(parseInt(b.stars,
10)+(b.resetButton?1:0))*20+"px",cursor:b.disabled?"default":"pointer"});a.setUnselectable();b.cleanFirst&&a.update();var g=function(h){var c=h,h=h||0,g=$A(a.descendants());g.each(function(a){a.setStyle({backgroundPosition:"0px 0px"}).removeClassName("rated")});g.each(function(a,b){b<h&&a.setStyle({backgroundPosition:"-32px 0px"}).addClassName("rated")});f.value=h||"";if(b.disable)a.disabled=!0,a.setStyle({cursor:"default"});a.value=c;b.onRate(a,b.name,h);a.run("keyup");f.run("change");if(b.resetButton)i[h===
0?"hide":"show"]()};a.setRating=g;$A($R(1,b.stars)).each(function(f){var c=(new Element("div")).setStyle({height:"16px",width:"16px",margin:"0.5px",cssFloat:"left",backgroundImage:"url("+b.imagePath+")"});c.observe("mouseover",function(){a.disabled||$A(a.descendants()).each(function(a,b){b<f&&a.setStyle({backgroundPosition:a.hasClassName("rated")?"-32px 0px":"-16px 0px"})})}).observe("click",function(){a.disabled||g(f)});if(b.titles&&b.titles[f-1])c.title=b.titles[f-1];k.push(c)});b.disabled||a.observe("mouseout",
function(){a.descendants().each(function(a){a.setStyle({backgroundPosition:a.hasClassName("rated")?"-32px 0px":"0px 0px"})})});if(b.resetButton){var i=(new Element("div")).setStyle({height:"16px",width:"16px",margin:"0.5px",cssFloat:"left",color:"#999",fontSize:"12px",textAlign:"center"});b.resetButtonImage?i.insert(new Element("img",{src:b.resetButtonImage,align:"absmiddle"})):i.insert(" x ");i.title=b.resetButtonTitle;i.hide();i.observe("click",function(){g(void 0)});k.push(i)}k.each(function(b){a.insert(b)});
a.insert(f);if(b.value>0)a.descendants().each(function(a,c){c++;c<=b.value&&a.setStyle({backgroundPosition:"-32px 0px"}).addClassName("rated");b.value>c-1&&b.value<c&&a.setStyle({backgroundPosition:"-48px 0px"}).addClassName("rated")}),f.value=b.value;return a},makeSearchBox:function(a,b){a=$(a);if(a.up(".searchbox"))return a;b=Object.extend({defaultText:"Search",onWrite:Prototype.K,onClear:Prototype.K,imagePath:"images/apple_search.png"},b||{});a.observe("keyup",function(c){h&&h.setStyle({backgroundPosition:a.value!==
""?"0 -57px":"0 -38px"});b.onWrite(a.value,c)}).observe("focus",function(){if(a.value==b.defaultText)a.value="",a.setStyle({color:"#666"})}).observe("blur",function(){if(a.value==="")a.setStyle({color:"#999"}),a.value=b.defaultText,h&&h.setStyle({backgroundPosition:a.value!==""?"0 -57px":"0 -38px"})});a.value=b.defaultText;a.setStyle({color:"#999"});if(a.type!=="text")return a.addClassName("searchbox"),a.observe("search",function(){a.run("keyup")}),a;a.setStyle({border:"none",background:"none",height:"14px",
outline:"none",width:parseInt(a.getStyle("width"),10)-32+"px"});var f,k=(new Element("table",{cellpadding:0,cellspacing:0,className:"searchbox"})).setStyle({height:"19px",fontFamily:"Verdana, Geneva, Arial, Helvetica, sans-serif",fontSize:"12px"}).insert(f=new Element("tbody")),g=new Element("tr"),i=(new Element("td")).setStyle({backgroundImage:"url("+b.imagePath+")",backgroundPosition:"0 -19px"}),h=(new Element("td")).insert("&nbsp;").setStyle({cursor:"default"});f.insert(g.insert((new Element("td")).setStyle({backgroundImage:"url("+
b.imagePath+")",backgroundPosition:"0 0",width:"10px"}).insert("&nbsp;")).insert(i).insert(h));h.setStyle({backgroundImage:"url("+b.imagePath+")",backgroundPosition:a.value!==""?"0 -57px":"0 -38px",width:"17px"});h.observe("click",function(){a.value="";a.focus();a.setStyle({color:"#333"});h.setStyle({backgroundPosition:"0 -38px"});b.onClear(a);a.run("keyup")});a.parentNode.replaceChild(k,a);i.insert(a);return a},slider:function(a,b){a=$(a);b=Object.extend({width:100,onUpdate:Prototype.K,maxValue:100,
value:0,buttonBack:'url("../images/ball.png") no-repeat scroll 0px 0px transparent'},b||{});if("JotForm"in window&&"url"in JotForm)b.buttonBack='url("'+JotForm.url+'images/ball.png") no-repeat scroll 0px 0px transparent';var f=function(a){a=a*100/b.maxValue*q/100;return Math.round(a<3?3:a)},k=new Element("div",{tabindex:1}),g=new Element("div"),i=new Element("div",{id:(new Date).getTime()}),h=new Element("table",{cellpadding:0,cellspacing:1,border:0,width:b.width,className:a.className}),c=new Element("tbody"),
m=new Element("tr"),j=new Element("tr"),l=new Element("td",{colspan:3}),n=(new Element("td",{align:"center",width:20})).insert("0"),r=(new Element("td",{align:"center",width:b.width-40})).insert(b.value).setStyle("font-weight:bold"),o=(new Element("td",{align:"center",width:20})).insert(b.maxValue),q=b.width-18,s=b.value;b.value=f(b.value);var p=function(a){a=parseInt(i.getStyle("left"),10)-a;a=a<=3?3:a;i.setStyle({left:a+"px"});t(a)},u=function(a){a=parseInt(i.getStyle("left"),10)+a;a=a>=q?q:a;i.setStyle({left:a+
"px"});t(a)},t=function(c){var f=q;a.value=parseInt(c,10)<=3?0:parseInt(parseInt(c,10)*b.maxValue/f,10);k.value=a.value===0?"":a.value;h.value=k.value;b.onUpdate(a.value);r.innerHTML=a.value;a.run("keyup");return a.value};k.setStyle({width:b.width+"px",position:"relative",overflow:"hidden",outline:"none"});g.setStyle({border:"1px solid #999",background:"#eee",margin:"8px",overflow:"hidden",height:"3px"}).setCSSBorderRadius("4px");i.setStyle({position:"absolute",height:"13px",width:"13px",background:b.buttonBack,
overflow:"hidden",border:"1px solid transparent",top:"3px",left:b.value+"px"}).setCSSBorderRadius("8px");n.setStyle({fontFamily:"Verdana",fontSize:"9px"});r.setStyle({fontFamily:"Verdana",fontSize:"9px"});o.setStyle({fontFamily:"Verdana",fontSize:"9px"});k.insert(g).insert(i);h.insert(c.insert(m).insert(j));l.insert(k);m.insert(l);j.insert(n).insert(r).insert(o);i.setDraggable({constraint:"horizontal",dragEffect:!1,cursor:"default",constrainLeft:3,constrainRight:q,onDrag:function(a){t(a.getStyle("left"))}});
k.observe("focus",function(){k.__hasFocus=!0;k.setStyle({borderColor:"#333"})}).observe("blur",function(){k.__hasFocus=!1;k.setStyle({borderColor:"#ccc"})});k.observe("keypress",function(a){a=document.getEvent(a);a.keyCode==37?p(5):a.keyCode==39&&u(5)}).observe(Event.mousewheel,function(a){if(!k.__hasFocus)return!0;a.stop();k.focus();a=Event.wheel(a);a>0?u(5):a<0&&p(5)});k.observe("click",function(a){if(a.target.id==i.id)return!1;a=Event.pointerX(a)-g.cumulativeOffset().left;a=a<3?3:a;a=a>q?q:a;i.shift({left:a,
duration:0.5});t(a)});c=new Element("input",{type:"hidden",name:a.name,value:s,id:a.id});a.parentNode.replaceChild(c,a);a=c;$(c.parentNode).insert(h.setUnselectable());c.setSliderValue=function(a){a=f(a);i.shift({left:a,duration:0.5});t(a)};return c},spinner:function(a,b){a=$(a);b=Object.extend({width:60,cssFloat:!1,allowNegative:!1,addAmount:1,maxValue:!1,minValue:!1,readonly:!1,value:!1,size:5,imgPath:"images/",onChange:Prototype.K},b||{});a.size=b.size;a.value=b.value===!1?parseFloat(a.value)||
"0":b.value;if(a.value<b.minValue)a.value=b.minValue;a.writeAttribute("autocomplete","off");var f={height:"10px",cursor:"default",textAlign:"center",width:"7px",fontSize:"9px",paddingLeft:"4px",paddingRight:"2px",border:"1px solid #ccc",background:"#f5f5f5"},k=new Element("div",{tabindex:"1"});b.cssFloat&&k.setStyle({cssFloat:b.cssFloat,marginRight:"5px"});k.setStyle({width:b.width+"px"});var g,i,h,c;g=new Element("table",{className:"form-spinner",cellpadding:0,cellspacing:0,border:0,height:20,width:b.width});
i=(new Element("tbody")).insert(h=new Element("tr"));k.insert(g);g.insert(i);a.parentNode.replaceChild(k,a);h.insert(h=(new Element("td",{className:"form-spinner-input-td",rowspan:2})).insert(a)).insert(c=(new Element("td",{className:"form-spinner-up"})).insert(new Element("img",{src:b.imgPath+"bullet_arrow_up.png",align:"right"})));i.insert((new Element("tr")).insert(i=(new Element("td",{className:"form-spinner-down"})).insert(new Element("img",{src:b.imgPath+"bullet_arrow_down.png",align:"right"}))));
g.setStyle({border:"1px solid #ccc",borderCollapse:"collapse",background:"#fff"});c.setStyle(f);i.setStyle(f);h.setStyle({paddingRight:"2px"});a.setStyle({height:"100%",width:"100%",border:"none",padding:"0px",fontSize:"14px",textAlign:"right",outline:"none"});var m=function(){if(!parseFloat(a.value))a.value=0;if(!(b.maxValue&&Number(a.value)>=Number(b.maxValue)))a.value=parseFloat(a.value)+parseInt(b.addAmount,10),b.onChange(a.value)},j=function(){if(!parseFloat(a.value))a.value=0;if(!(b.minValue&&
Number(a.value)<=Number(b.minValue))&&(b.allowNegative||a.value!="0"))a.value=parseFloat(a.value)-b.addAmount,b.onChange(a.value)},l=function(a,b){a.target.tagName=="INPUT"&&b==2||(a=document.getEvent(a),a.keyCode==38?m(a):a.keyCode==40&&j(a))};c.observe("click",function(b){m(b);a.run("keyup")}).setUnselectable();i.observe("click",function(b){j(b);a.run("keyup")}).setUnselectable();a.observe(Prototype.Browser.Gecko?"keypress":"keydown",function(a){l(a,1)});k.observe(Prototype.Browser.Gecko?"keypress":
"keydown",function(a){l(a,2)});b.readonly&&a.writeAttribute("readonly","readonly");a.observe("change",function(){b.onChange(a.value)});return a},colorPicker:function(a,b){b=Object.extend({title:"Pick a Color",background:"#eee",trigger:!1,onPicked:Prototype.K,onComplete:Prototype.K,onStart:Prototype.K,onEnd:Prototype.K},b||{});$(b.trigger||a).observe("click",function(){if(b.onStart()===!1)return a.colorPickerEnabled=!1,a;var f=Protoplus.Colors.getPalette();if(a.colorPickerEnabled)return!1;var k,g,
i,h=(new Element("table",{cellpadding:4,cellspacing:0,border:0,width:140})).setStyle({zIndex:1E5}).insert(k=new Element("tbody"));b.className?h.addClassName(b.className):h.setStyle({background:b.background,outline:"1px solid #aaa",border:"1px solid #fff"});k.insert((new Element("tr")).insert((new Element("th",{className:"titleHandler",colspan:"2",height:"10"})).setText(b.title).setStyle({paddingTop:"2px",paddingBottom:"0px",color:"#333",fontSize:"14px"}))).insert(g=new Element("tr")).insert(i=new Element("tr"));
g.insert(k=new Element("td"));g.insert(g=new Element("td"));i.insert(i=new Element("td",{colspan:2}));var c=(new Element("input",{type:"text"})).setStyle({width:"48px",margin:"1px"});c.observe("keyup",function(){c.setStyle({background:c.value,color:Protoplus.Colors.invert(c.value)})});var m=new Element("input",{type:"button",value:"Flip"});m.observe("click",function(){var a=q.getScroll();scr=0;a.y>=0&&(scr=140);scr=a.y>=l.getHeight()-140?0:a.y+140;q.shift({scrollTop:scr,link:"ignore",duration:0.3})});
var j=(new Element("input",{type:"button",value:"OK"})).observe("click",function(){if(a.tagName=="INPUT")a.value=c.value,a.focus();h.remove();setTimeout(function(){a.colorPickerEnabled=!1;b.onComplete(c.value,a,h)},100)});b.buttonClass?$(m,j).invoke("addClassName",b.buttonClass):$(m,j).invoke("setStyle",{padding:"1px",margin:"1px",background:"#f5f5f5",border:"1px solid #ccc"});a.closeColorPicker=function(){j.run("click")};i.insert(c).insert(m).insert(j);var l=new Element("table",{cellpadding:0,cellspacing:0,
border:0,width:140}),n=new Element("tbody"),r=0,o;$H(f).each(function(f){r==7&&(r=0);r++===0&&(o=new Element("tr"),n.insert(o));var g=function(){c.value=f.value;c.setStyle({background:c.value,color:Protoplus.Colors.invert(c.value)});b.onPicked(c.value,a,h)};f.value===!1?o.insert((new Element("td",{width:20,height:20})).setStyle({background:"#fff"}).setStyle({})):o.insert((new Element("td",{width:20,height:20})).setStyle({background:f.value}).observe("click",g).tooltip(f.value,{delay:0.6,width:"auto"}))});
l.insert(n);var q=(new Element("div")).setStyle({outline:"1px solid #fff",border:"1px solid #666",overflow:"hidden",height:"140px"}),f=(new Element("table",{cellPadding:0,cellspacing:0,width:40})).setStyle({outline:"1px solid #fff",border:"1px solid #666",overflow:"hidden",height:"140px"}),s=new Element("tbody");f.insert(s);g.insert(f);k.insert(q.insert(l));var p=[["Black:#000000","Navy:#000080"],["Blue:#0000FF","Magenta:#FF00FF"],["Red:#FF0000","Brown:#A52A2A"],["Pink:#FFC0CB","Orange:#FFA500"],
["Green:#008000","Yellow:#FFFF00"],["Gray:#808080","Turquoise:#40E0D0"],["Cyan:#00FFFF","White:#FFFFFF"]];$R(0,6).each(function(f){var g=new Element("tr");s.insert(g);g.insert((new Element("td",{height:20,width:20})).setText("&nbsp;").setStyle({background:p[f][0].split(":")[1]}).tooltip(p[f][0].split(":")[0],{delay:0.6,width:"auto"}).observe("click",function(){c.value=p[f][0].split(":")[1];c.setStyle({background:c.value,color:Protoplus.Colors.invert(c.value)});b.onPicked(c.value,a,h)}));g.insert((new Element("td",
{height:20,width:20})).setText("&nbsp;").setStyle({background:p[f][1].split(":")[1]}).tooltip(p[f][1].split(":")[0],{delay:0.6,width:"auto"}).observe("click",function(){c.value=p[f][1].split(":")[1];c.setStyle({background:c.value,color:Protoplus.Colors.invert(c.value)});b.onPicked(c.value,a,h)}))});f=a.cumulativeOffset().top+a.getHeight();k=a.cumulativeOffset().left;h.setStyle({position:"absolute",top:f+3+"px",left:k+2+"px"});h.setDraggable({handler:h.select(".titleHandler")[0],dragEffect:!1});$(document.body).insert(h);
b.onEnd(a,h);q.setScroll({y:"0"});a.colorPickerEnabled=!0});return a},colorPicker2:function(a,b){b=Object.extend({onStart:Prototype.K,onEnd:Prototype.K,trigger:!1,onPicked:Prototype.K,onComplete:Prototype.K,hideOnBlur:!1,buttonClass:"big-button buttons"},b||{});$(b.trigger||a).observe("click",function(){var f;function k(a){for(var a=typeof a=="object"?a:$(a),b={X:0,Y:0};a!==null;)b.X+=a.offsetLeft,b.Y+=a.offsetTop,a=a.offsetParent;return b}function g(a,b){var c=a||window.event,c=[Event.pointerX(c),
Event.pointerY(c)],b=parseInt(b,10);return c[!isNaN(b)?b:0]}function i(a,b,c){function j(a,b,c){return Math.min(a,Math.max(0,Math.ceil(parseInt(c,10)/b*a)))}function i(a,b){if(a>=0&&a<=b)return a;else if(a>b)return b;else if(a<0)return"-"+B}function m(b){if(!l)if(a!="drag"&&(z=g(b,1)-t.Y,x=g(b)-t.X),a==u)n.left=i(x-B,162)+"px",n.top=i(z-B,162)+"px",A.S=j(100,162,n.left),A.V=100-j(100,162,n.top),h();else if(a==y){var b=i(z-B,163),c={};n.top=b+"px";A.H=j(360,163,b);c.H=f-j(f,163,b);c.S=v.S;c.V=v.V;
h(c);p.style.backgroundColor="#"+w.HSV_HEX({H:v.H,S:100,V:100})}else if(a=="drag")n.left=g(b)+r-q+"px",n.top=g(b,1)+o-s+"px"}if(l){l="";var n=$(a!="drag"?a:b).style;if(a=="drag")var r=parseInt(n.left,10),o=parseInt(n.top,10),q=g(c),s=g(c,1);else{var t=k($(b)),x,z,B=a==y?0:4;t.X+=10;t.Y+=22;if(a==u)A.H=v.H}document.onmousemove=m;document.onmouseup=function(){l=1;document.onmousemove="";document.onmouseup=""};m(c)}}function h(c){c=v=c?c:A;c=w.HSV_HEX(c);s.value="#"+c;q.style.background="#"+c;a.tagName==
"BUTTON"?a.__colorvalue="#"+c:a.value="#"+c;b.onPicked("#"+c,a,o);return c}function c(a){a=Protoplus.Colors.getRGBarray(a);a=w.RGB_HSV(a[0],a[1],a[2]);p.style.backgroundColor="#"+w.HSV_HEX({H:a.H,S:100,V:100});y.style.top=Math.abs(Math.ceil(a.H*163/360)-163)+"px";var b=Math.abs(Math.floor(a.V*162/100)-162),c=Math.abs(Math.floor(a.S*162/100));b<=0&&(b-=4);c<=0&&(c-=4);u.style.top=b+"px";u.style.left=c+"px";h(a)}var m=!1;if(a.colorPickerEnabled)return a;if(b.onStart()===!1)return a;b.hideOnBlur&&setTimeout(function(){m=
Element.on(document,"click",function(b){Event.findElement(b,".plugin, ")||a.closeColorPicker()})},0);a.colorPickerEnabled=!0;var j=a.cumulativeScrollOffset(),l=1,n=a.measure("cumulative-top")+2,j=a.measure("cumulative-left")+1-j.left,r=a.measure("border-box-height"),o=new Element("div",{className:"plugin edit-box"}),q=new Element("div",{className:"plugCUR"}),s=new Element("input",{type:"text",size:"10",className:"plugHEX"}),p=(new Element("div",{className:"SV"})).setUnselectable(),u=new Element("div",
{className:"SVslide"}),t=(new Element("form",{className:"H"})).setUnselectable(),y=new Element("div",{className:"Hslide"}),z=new Element("div",{className:"Hmodel"}),x=new Element("button",{type:"button",className:""});o.insert("<br>").insert(p).insert(t);o.insert(q).insert(s.setValue("#FFFFFF")).insert(x.update("OK"));p.insert(u.update("<br>"));t.insert(y.update("<br>")).insert(z);o.setStyle({position:"absolute",top:n+r+"px",left:j+"px",zIndex:"10000000"});u.setStyle("top:-4px; left:-4px;");y.setStyle("top:0px; left:-8px;");
x.setStyle("float:right;margin-top:8px;").addClassName(b.buttonClass);o.observe("mousedown",function(a){i("drag",o,a)});s.observe("mousedown",function(){l=0;setTimeout(function(){l=1},100)});p.observe("mousedown",function(a){i(u,o,a)});t.observe("mousedown",function(a){i(y,o,a)});x.observe("click",function(){o.remove();a.colorPickerEnabled=!1;m&&m.stop();b.onComplete(s.value)});a.closeColorPicker=function(){x.run("click")};f=360;var v={H:360,S:100,V:100},A={H:360,S:100,V:100};a.setColorPickerValue=
c;var w={cords:function(a){a/=2;var b=hsv.H/360*Math.PI*2,c=(hsv.S+(100-hsv.V))/100*(a/2);$("mCur").style.left=Math.round(Math.abs(Math.round(Math.sin(b)*c)+a+3))+"px";$("mCur").style.top=Math.round(Math.abs(Math.round(Math.cos(b)*c)-a-21))+"px"},HEX:function(a){a=Math.round(Math.min(Math.max(0,a),255));return"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16)},RGB_HSV:function(a,b,c){a/=255;b/=255;c/=255;var f=Math.max(a,b,c),g=Math.min(a,b,c),h,j=f-g;if(f==g)h=0;else{switch(f){case a:h=
(b-c)/j+(b<c?6:0);break;case b:h=(c-a)/j+2;break;case c:h=(a-b)/j+4}h/=6}return{H:h*360,S:(f===0?0:j/f)*100,V:f*100}},RGB_HEX:function(a){var b=w.HEX;return b(a.R)+b(a.G)+b(a.B)},HSV_RGB:function(a){var b,c,f,g;g=a.S/100;var h=a.V/100,j=a.H/360;if(g>0){j>=1&&(j=0);j*=6;F=j-Math.floor(j);a=Math.round(255*h*(1-g));f=Math.round(255*h*(1-g*F));g=Math.round(255*h*(1-g*(1-F)));h=Math.round(255*h);switch(Math.floor(j)){case 0:b=h;c=g;f=a;break;case 1:b=f;c=h;f=a;break;case 2:b=a;c=h;f=g;break;case 3:b=a;
c=f;f=h;break;case 4:b=g;c=a;f=h;break;case 5:b=h,c=a}return{R:b?b:0,G:c?c:0,B:f?f:0,A:1}}else return{R:h=Math.round(h*255),G:h,B:h,A:1}},HSV_HEX:function(a){return w.RGB_HEX(w.HSV_RGB(a))}};$(document.body).insert(o);(function(){for(var a="",b=165;b>=0;b--)a+='<div style="BACKGROUND: #'+w.HSV_HEX({H:Math.round(360/165*b),S:100,V:100})+';"><br /></div>';z.innerHTML=a})();c(a.__colorvalue||a.value||"#FFFFFF");b.onEnd(a,o);return a})},miniLabel:function(a,b,f){f=Object.extend({position:"bottom",color:"#666",
size:9,text:"",nobr:!1},f||{});a.wrap("span");span=$(a.parentNode);span.setStyle({whiteSpace:"nowrap",cssFloat:"left",marginRight:"5px"});var k={paddingLeft:"1px",fontSize:f.size+"px",color:f.color,cursor:"default"},g=function(){a.focus()},i="<br>";f.nobr&&(i="");f.position=="top"?a.insert({before:(new Element("span")).setText(b+i).setStyle(k).observe("click",g)}).insert({after:f.text}):a.insert({after:(new Element("span")).setText(i+b).setStyle(k).observe("click",g)}).insert({after:f.text});return span},
hint:function(a,b,f){a=$(a);if("placeholder"in a)return a.writeAttribute("placeholder",b),a;if(a.type=="number")return a.value="0",a;if(a.removeHint)return a.hintClear();var f=Object.extend({hintColor:"#bbb"},f||{}),k=a.getStyle("color")||"#000";if(a.value==="")a.setStyle({color:f.hintColor}),a.value=b,a.hinted=!0;var g=function(){if(a.value==b)a.value="",a.setStyle({color:k}).hinted=!1},i=function(){if(a.value==="")a.value=b,a.setStyle({color:f.hintColor}).hinted=!0},h=function(){if(a.value==b)a.value=
"",a.hinted=!1};a.observe("focus",g);a.observe("blur",i);a.form&&$(a.form).observe("submit",h);a.runHint=i;a.clearHint=function(){a.value="";a.setStyle({color:k}).hinted=!1};a.hintClear=function(){a.value=b;a.setStyle({color:f.hintColor}).hinted=!0;return a};a.removeHint=function(){a.setStyle({color:k});if(a.value==b)a.value="";a.hintClear=void 0;a.hinted=void 0;a.removeHint=void 0;a.stopObserving("focus",g);a.stopObserving("blur",i);a.form&&$(a.form).stopObserving("submit",h);return a};return a},
resizable:function(a,b){var b=Object.extend({sensitivity:10,overflow:0,onResize:Prototype.K,onResizeEnd:Prototype.K,imagePath:"images/resize.png",element:!1,maxHeight:!1,minHeight:!1,maxWidth:!1,minWidth:!1,maxArea:!1,autoAdjustOverflow:!0,constrainViewport:!0,constrainParent:!1,keepAspectRatio:!1,displayHandlers:!0},b,{}),f=$(a),a=b.element?$(b.element):$(a);a.resized=!0;var k=f.getStyle("position");(!k||k=="static")&&f.setStyle({position:"relative"});var g;a.getDimensions();var i=(parseInt(a.getStyle("padding-top"),
10)||0)+(parseInt(a.getStyle("padding-bottom"),10)||0),h=(parseInt(a.getStyle("padding-left"),10)||0)+(parseInt(a.getStyle("padding-right"),10)||0),c=new Element("div"),m=new Element("div"),j=new Element("div");c.setStyle({height:b.sensitivity+"px",width:b.sensitivity+"px",position:"absolute",bottom:"-"+b.overflow+"px",right:"-"+b.overflow+"px",cursor:"se-resize",zIndex:1E4});m.setStyle({height:"100%",width:b.sensitivity+"px",position:"absolute",top:"0px",right:"-"+b.overflow+"px",cursor:"e-resize",
zIndex:1E4});j.setStyle({height:b.sensitivity+"px",width:"100%",position:"absolute",bottom:"-"+b.overflow+"px",left:"0px",cursor:"s-resize",zIndex:1E4});c.setStyle({background:"url("+b.imagePath+") no-repeat bottom right"});var l=function(k,l){k.stop();document.stopDrag=!0;f.setUnselectable();$(document.body).setUnselectable();var o=$H(a.getDimensions()).map(function(a){if(a.key=="height")return a.value-i;else if(a.key=="width")return a.value-h;return a.value}),q=o[1],s=o[0];b.keepAspectRatio&&(g=
Math.abs(q/s));var p=a.cumulativeOffset(),u=$(a.parentNode).getDimensions(),t=$(a.parentNode).cumulativeOffset(),y=Event.pointerY(k),z=Event.pointerX(k),x=document.viewport.getDimensions();switch(l){case "both":c.setStyle("height:100%; width:100%");break;case "horizontal":m.setStyle({width:"100%"});break;case "vertical":j.setStyle({height:"100%"})}var v=function(c){var f=c.height,g=c.width,c=c.type||"both";if(f){f=b.maxHeight&&f>=b.maxHeight?b.maxHeight:f;f=b.minHeight&&f<=b.minHeight?b.minHeight:
f;if(b.maxArea&&f*a.getWidth()>=b.maxArea)return;a.setStyle({height:f+"px"})}if(g){g=b.maxWidth&&g>=b.maxWidth?b.maxWidth:g;g=b.minWidth&&g<=b.minWidth?b.minWidth:g;if(b.maxArea&&a.getHeight()*g>=b.maxArea)return;a.setStyle({width:g+"px"})}b.onResize((f||q)+i,(g||s)+h,c)},A=function(a){a.stop();if(l!="horizontal"){var c=q+(Event.pointerY(a)-y),f=!1;b.constrainViewport&&(f=c+p.top>=x.height-3);b.constrainParent&&(f=c+p.top+i>=u.height+t.top-3)&&v({height:u.height+t.top-3-(p.top+i+3),type:l});f||(v({height:c,
type:l}),b.keepAspectRatio&&v({width:c/g,type:l}))}l!="vertical"&&(a=s+(Event.pointerX(a)-z),c=!1,b.constrainViewport&&(c=a+p.left>=x.width-3),b.constrainParent&&(c=a+p.left+h>=u.width+t.left-3)&&v({width:u.width+t.left-3-(p.left+h+3),type:l}),c||(v({width:a,type:l}),b.keepAspectRatio&&v({height:a*g,type:l})))},w=function(){c.setStyle({height:b.sensitivity+"px",width:b.sensitivity+"px"});m.setStyle({width:b.sensitivity+"px"});j.setStyle({height:b.sensitivity+"px"});document.stopObserving("mousemove",
A).stopObserving("mouseup",w).stopDrag=!1;f.setSelectable();b.onResizeEnd(a.getHeight(),a.getWidth());$(document.body).setSelectable()};document.observe("mousemove",A).observe("mouseup",w);return!1};c.observe("mousedown",function(a){l(a,"both")});m.observe("mousedown",function(a){l(a,"horizontal")});j.observe("mousedown",function(a){l(a,"vertical")});a.hideHandlers=function(){c.hide();m.hide();j.hide()};a.showHandlers=function(){c.show();m.show();j.show()};f.insert(j).insert(m).insert(c);return f},
positionFixed:function(a,b){var a=$(a),b=Object.extend({offset:10,onPinned:Prototype.K,onUnpinned:Prototype.K,onBeforeScroll:Prototype.K,onBeforeScrollFail:Prototype.K,onScroll:Prototype.K},b||{}),f=a.cumulativeOffset(),k=a.cumulativeScrollOffset(),g=f.top+k.top,i=function(){if(a.pinned)return!0;var f={},c=$(document.body).cumulativeScrollOffset(),f=g<=c.top+b.offset?{position:"fixed",top:b.offset+"px"}:{position:"absolute",top:g+"px"};b.onBeforeScroll(a,parseInt(f.top,10),c.top)!==!1?(a.setStyle(f),
b.onScroll(a,c.top)):a.style.position=="fixed"&&(a.setStyle({position:"absolute",top:c.top+b.offset+"px"}),b.onBeforeScrollFail(a,parseInt(f.top,10),c.top))};a.pin=function(){var f=$(document.body).cumulativeScrollOffset();a.style.top=f.top+b.offset+"px";a.style.position="absolute";b.onPinned(a);a.pinned=!0};a.isPinned=function(){b.onPinned(a);return a.pinned};a.unpin=function(){a.pinned=!1;i();b.onUnpinned(a)};a.updateScroll=i;a.updateTop=function(b){g=b;return a};Event.observe(window,"scroll",i);
return a},positionFixedBottom:function(a,b){var a=$(a),b=Object.extend({offset:0,onPinned:Prototype.K,onUnpinned:Prototype.K,onBeforeScroll:Prototype.K,onScroll:Prototype.K},b||{}),f=a.cumulativeOffset(),k=a.cumulativeScrollOffset(),g=f.top+k.top,i=a.getHeight(),h=function(){if(a.pinned)return!0;var c=$(document.body).cumulativeScrollOffset();!(g+i>=c.top+b.offset)&&a.style.position=="fixed"&&(a.setStyle({position:"absolute",top:c.top+b.offset+"px"}),b.onBeforeScrollFail(a,parseInt(void 0,10),c.top))};
h();a.pin=function(){var c=$(document.body).cumulativeScrollOffset();a.style.top=c.top+b.offset+"px";a.style.position="absolute";b.onPinned(a);a.pinned=!0};a.isPinned=function(){b.onPinned(a);return a.pinned};a.unpin=function(){a.pinned=!1;h();b.onUnpinned(a)};a.updateScroll=h;a.updateTop=function(b){g=b;return a};Event.observe(window,"scroll",h);return a},keepInViewport:function(a,b){a=$(a);b=Object.extend({offset:[10,10],offsetLeft:!1,offsetTop:!1,delay:0.1,onPinned:Prototype.K,onUnpinned:Prototype.K,
onBeforeScroll:Prototype.K,onScroll:Prototype.K,smooth:!1,horzontal:!1,vertical:!0,animation:{duration:0.2,easing:"sineOut"},topLimit:parseInt(a.getStyle("top")||0,10),leftLimit:parseInt(a.getStyle("left")||0,10)},b||{});b.animation=Object.extend({duration:0.4},b.animation||{});b.delay*=1E3;typeof b.offset=="number"?(b.offsetLeft=b.offset,b.offsetTop=b.offset):(b.offsetLeft=b.offset[0],b.offsetTop=b.offset[1]);var f=!1,k=function(){if(a.pinned)return!0;f&&clearTimeout(f);var g=b.animation,i=function(){var f=
a.cumulativeOffset(),c=a.cumulativeScrollOffset(),i=b.offsetTop,j=b.offsetLeft;if(c.top<i)i=c.top;if(c.left<j)j=c.left;if(b.vertical)if(c.top>=f.top-i){if(c.top>0)g.top=c.top+i+"px"}else if(f.top!=b.topLimit)g.top=c.top+i>b.topLimit?c.top+i+"px":b.topLimit+"px";if(b.horizontal)if(c.left>=f.left-j){if(c.left>0)g.left=c.left+j+"px"}else if(f.left!=b.leftLimit)g.left=c.left+j>b.leftLimit?c.left+j+"px":b.leftLimit+"px";if(b.onBeforeScroll(a,parseInt(g.top,10)||0,parseInt(g.left,10)||0)!==!1)b.smooth?
(g.onEnd=function(){b.onScroll(a,g.top,g.left)},a.shift(g)):(a.style.left=g.left,a.style.top=g.top,b.onScroll(a,g.top,g.left))};b.smooth===!1?i():f=setTimeout(i,b.delay);return a};a.pin=function(){b.onPinned(a);a.pinned=!0};a.isPinned=function(){return a.pinned};a.unpin=function(){a.pinned=!1;k();b.onUnpinned(a)};a.update=k;a.updateLimits=function(f,i){b.topLimit=f||parseInt(a.getStyle("top")||0,10);b.leftLimit=i||parseInt(a.getStyle("left")||0,10);return a};Event.observe(window,"scroll",k);return a},
bigSelect:function(a,b){a=$(a);if(!Prototype.Browser.IE9&&Prototype.Browser.IE)return a;b=Object.extend({classpreFix:"big-select",additionalClassName:"",onSelect:function(a){return a},onComplete:function(a){return a}},b||{});a.selectConverted&&a.selectConverted.remove();var f=(new Element("div",{className:b.classpreFix+" "+b.additionalClassName,tabIndex:"1"})).setStyle({outline:"none",fontSize:a.getStyle("font-size")}),k=new Element("div",{className:b.classpreFix+"-content"}),g=(new Element("div",
{className:b.classpreFix+"-list"})).setStyle("z-index:2000000").hide(),i=new Element("div",{className:b.classpreFix+"-arrow"}),h=new Element("div",{className:b.classpreFix+"-content-span"});a.selectConverted=f;f.setUnselectable();b.width&&f.setStyle({width:b.width});k.update(h);f.insert(k).insert(g).insert(i);a.insert({before:f}).hide();a.observe("change",function(){h.update(b.onSelect(a.getSelected().text))});var c=function(){f.removeClassName(b.classpreFix+"-open");g.hide()};$A(a.options).each(function(f){f.selected&&
h.update(b.onSelect(f.text));var i=(new Element("li",{value:f.value})).insert(f.text);i.hover(function(){i.setStyle("background:#ccc")},function(){i.setStyle({background:""})});i.observe("click",function(){h.update(b.onSelect(i.innerHTML,i.readAttribute("value")));a.selectOption(i.readAttribute("value"));c()});g.insert(i)});f.observe("blur",function(){c()});g.show();g.getStyle("top");g.hide();var m=function(){if(g.visible())c();else{g.show();f.addClassName(b.classpreFix+"-open");g.setStyle({height:"",
overflow:"",bottom:""});var a=document.viewport.getHeight(),h=g.cumulativeOffset().top,i=g.getHeight();a<h+i&&(a-h-20<150?(a="auto",i>h&&(a=h-10+"px"),g.setStyle({bottom:k.getHeight()+"px",top:"auto",height:a,overflow:"auto"})):g.setStyle({height:a-h-20+"px",overflow:"auto"}))}};i.observe("click",m);k.observe("click",m);b.onComplete(f,a);return a},rotatingText:function(a,b,f){var a=$(a),f=Object.extend({delimiter:" - ",duration:150},f||{}),k=a.innerHTML.strip();b+=f.delimiter;var g=k.length,i=b.substr(0,
g);a.innerHTML=i;var h=0,c=setInterval(function(){if(h==b.length)h=0,a.innerHTML=b.substr(h++,g);else if(h+g>b.length){var c=b.substr(h,g);c+=b.substr(0,g-(b.length-h));a.innerHTML=c;h++}else a.innerHTML=b.substr(h++,g)},f.duration);a.rotatingStop=function(){clearTimeout(c);a.innerHTML=k};return a}};Element.addMethods(Protoplus.ui);
