(function(b,f){var a={index:0,initialized:!1},c={init:function(e){return this.each(function(){a=b.extend(a,e);a.$w=b(f);a.$topbar=b("nav.top-bar");a.$section=a.$topbar.find("section");a.$titlebar=a.$topbar.children("ul:first");var d=b("<div class='top-bar-js-breakpoint'/>").appendTo("body");a.breakPoint=d.width();d.remove();if(!a.initialized)c.assemble(),a.initialized=!0;a.height||c.largestUL();a.$topbar.parent().hasClass("fixed")&&b("body").css("padding-top",a.$topbar.outerHeight());b(".top-bar .toggle-topbar").die("click.fndtn").live("click.fndtn",
function(b){b.preventDefault();c.breakpoint()&&(a.$topbar.toggleClass("expanded"),a.$topbar.css("min-height",""));if(!a.$topbar.hasClass("expanded"))a.$section.css({left:"0%"}),a.$section.find(">.name").css({left:"100%"}),a.$section.find("li.moved").removeClass("moved"),a.index=0});b(".top-bar .has-dropdown>a").die("click.fndtn").live("click.fndtn",function(e){(Modernizr.touch||c.breakpoint())&&e.preventDefault();if(c.breakpoint()){var e=b(this),d=e.closest("li");d.children("ul");a.index+=1;d.addClass("moved");
a.$section.css({left:-(100*a.index)+"%"});a.$section.find(">.name").css({left:100*a.index+"%"});e.siblings("ul").height(a.height+a.$titlebar.outerHeight(!0));a.$topbar.css("min-height",a.height+a.$titlebar.outerHeight(!0)*2)}});b(f).on("resize.fndtn.topbar",function(){c.breakpoint()||a.$topbar.css("min-height","")});b(".top-bar .has-dropdown .back").die("click.fndtn").live("click.fndtn",function(e){e.preventDefault();var d=b(this).closest("li.moved");d.parent();a.index-=1;a.$section.css({left:-(100*
a.index)+"%"});a.$section.find(">.name").css({left:100*a.index+"%"});a.index===0&&a.$topbar.css("min-height",0);setTimeout(function(){d.removeClass("moved")},300)})})},breakpoint:function(){return a.$w.width()<a.breakPoint},assemble:function(){a.$section.detach();a.$section.find(".has-dropdown>a").each(function(){var a=b(this),d=a.siblings(".dropdown"),c=b('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');c.find("h5>a").html(a.html());d.prepend(c)});a.$section.appendTo(a.$topbar)},
largestUL:function(){var e=a.$topbar.find("section ul ul"),d=e.first(),c=0;e.each(function(){b(this).children("li").length>d.children("li").length&&(d=b(this))});d.children("li").each(function(){c+=b(this).outerHeight(!0)});a.height=c}};b.fn.foundationTopBar=function(a){if(c[a])return c[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return c.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.foundationTopBar")}})(jQuery,this);
